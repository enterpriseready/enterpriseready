<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="To gain significant enterprise adoption, SaaS applications need to implement audit logging of all user activity and make it accessible to account admins.">
<meta name="og:description" content="To gain significant enterprise adoption, SaaS applications need to implement audit logging of all user activity and make it accessible to account admins.">
<meta name="twitter:site" value="@enterpriseready"/>
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:creator" content="@replicatedhq"/>
<meta property="og:image" content="https://www.enterpriseready.ioimages/twtr/audit-log-og.png" itemprop="image"/>
<meta property="og:title" content="Enterprise Ready SaaS App Guide to Audit Logging"/>


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>Enterprise Ready SaaS App Guide to Audit Logging</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/featherlight.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <script src="//code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="/js/base.js"></script>
    <script type="text/javascript" src="/js/featherlight.min.js"></script>
    <link rel="icon" type="image/png" href="/images/favicon.png">
</head>
<body>
  <body class="" data-url="/features/audit-log/">
<div class="container" id="inner-nav">

    <div id="menu"><a href="#">Menu</a></div>
    <script>
        $(document).ready(function() {
            $("#menu").click(function() {
                $(".mobile_menu").slideToggle("fast", function() {

                });
            });
        });
    </script>


    <div class="menu">
        <ul>
          <li><a href="/#features">The Feature Guides</a></li>
          <li>|</li>
          <li><a href="/#examples">Example Implementations</a></li>
          <li>|</li>
          <li><a href="/#background">Project Background</a></li>
          <li>|</li>
          <li>Contributed by <a class="disguise-link" href="https://www.replicated.com" target="_blank">Replicated </a></li>
        </ul>
    </div>

    <p class="logo">
        <a href="/"><img src="/images/enterprise-ready-logo.png" width="50" /></a>
    </p>


    <div class="mobile_menu">
        <ul>
            <li style="font-size:16px;color:#BD422D">Menu</li>
            <li>
                <hr/>
            </li>
            <li><a href="/#features">The Feature Guides</a></li>
            <li><a href="/#examples">Example Implementations</a></li>
            <li><a href="/#background">Project Background</a></li>
            <li>Contributed by <a href="https://www.replicated.com" target="_blank">Replicated</a></li>
        </ul>

    </div>

</div>


<div class="second-nav">
    <div class="container" id="breadcrumbs">
        <div id="tool-tip">
            <span style="cursor:pointer;color:#878787">Features</span>
            <div class="tool-tip">
                <ul>
                    <li><a href="/features/product-assortment">Product Assortment</a></li>
                    <hr />
                    <li><a href="/features/single-sign-on">Single Sign On</a></li>
                    <hr />
                    <li><a href="/features/audit-log">Audit Logs</a></li>
                    <hr />
                    <li><a href="/features/role-based-access-control">Role Based Access Control</a></li>
                    <hr />
                    <li><a href="/features/change-management">Change Management</a></li>
                    <hr />
                    <li><a href="/features/product-security">Product Security</a></li>
                    <hr />
                    <li><a href="/features/deployment-options">Deployment Options</a></li>
                    <hr  />
                    <li><a href="/features/teams">Team Management</a></li>
                    <hr  />
                    <li><a href="/features/integrations">Integrations</a></li>
                    <hr />
                    <li><a href="/features/advanced-reporting">Advanced Reporting</a></li>
                    <hr  />
                    <li><a href="/features/sla-support">SLA and Support</a></li>
                </ul>
            </div>
        </div>
        <span>/</span> Audit Logs
        <div class="pull-right">
            <a class="edit-button" href="https://github.com/enterpriseready/enterpriseready/edit/master/content/features/audit-log.md">Edit this page</a>
        </div>
    </div>
</div>

<div class="container" id="article">
    <p align="center"><img src="/images/audit-log.svg" /></p>

    <h1>Audit Logs</h1>

    <p>Audit logs are the centralized stream of all user activity within a team. Part of the security and compliance program of any large enterprise is designed to control and monitor the access of information within the organization. This drives the need for enterprise buyers to ask for a detailed audit trail of all activity that happens within their account. An audit trail can be used to prevent suspicious activity when it starts (if actively monitored), or to play back account activity during an incident review.</p>
<h2 id="audit-logs--system-logs">Audit logs ≠ system logs</h2>
<p>It isn’t enough to log events internally to a traditional logging service like Loggly, Elastic Search, Papertrail etc. Those applications are designed to provide application developers with the system level logs to diagnose application performance issues. Instead, an audit logging feature is built from the ground up to log the relevant activity into a system that is immutable, time synced and accessible by account admins. Additionally, the best audit logs (as implemented by companies like GitHub and <a href="/google/audit-log">Google</a>) are fully exportable, available from an API, searchable and include well documented changes.</p>
<h2 id="events-to-audit-log">Events to audit log</h2>
<p>The most basic audit logging functionality requires a clear understanding of which events should be recorded in the audit log. The ISO-27002 specifications provide some clarity about what enterprise customers will likely need to have logged. However, every application can be a bit different in terms of what activities should actually be logged for auditing.</p>
<p>Generally, the specific content of a target is not audit logged, rather the state or context is logged. Examples of events that should be audit logged are as follows: application specific user activities, exceptions, information security events (successful and rejected events), use of privileges, log-on failed-attempts &amp; successes, log-off, data accessed, data attempted to be accessed, administrative configuration changes and the use of advanced privileges.</p>
<p>The best way to organize <strong>events</strong> is as the combination of <strong>targets</strong> receiving <strong>actions</strong> (i.e. <code>user.created</code>, <code>user.deleted</code>, <code>document.viewed</code>, <code>account.setting.updated</code>). Actions can generally be categorized into their <code>CRUD</code> type (i.e. <code>C</code>reate, <code>R</code>ead, <code>U</code>pdate, or <code>D</code>elete). Events are generally performed by an actor (i.e. a <a href="mailto:bob@somebigbank.com">bob@somebigbank.com</a> updated their password) however, there are anonymous actions (such as failed log in attempts).</p>
<p><em>Note: When the logging of these events is implemented in code, the audit logging method should be called at the</em> <em><strong>bottom</strong></em> <em>of the function to ensure that the event was fully executed.</em></p>
<h2 id="fields-to-audit-log-for-each-event">Fields to audit log for each event</h2>
<p>When an event is logged it should have details that provide enough information about the event to provide the necessary context of who, what, when and where etc. Specifically, the follow fields are critical to an audit log:</p>
<ul>
<li><strong>Actor</strong> - The username, uuid, API token name of the account taking the action.</li>
<li><strong>Group</strong> - The group (aka organization, team, account) that the actor is a member of (needed to show admins the full history of their group).</li>
<li><strong>Where</strong> - IP address, device ID, country.</li>
<li><strong>When</strong> - The NTP synced server time when the event happened.</li>
<li><strong>Target</strong> - the object or underlying resource that is being changed (the noun) as well as the fields that include a key value for the new state of the target.</li>
<li><strong>Action</strong> - the way in which the object was changed (the verb).</li>
<li><strong>Action Type</strong> - the corresponding <code>C``R``U``D</code> category.</li>
<li><strong>Event Name</strong> - Common name for the event that can be used to filter down to similar events.</li>
<li><strong>Description</strong> - A human readable description of the action taken, sometimes includes links to other pages within the application.</li>
</ul>
<h3 id="optional-information">Optional information</h3>
<ul>
<li><strong>Server</strong> server ids or names, server location.</li>
<li><strong>Version</strong> version of the code that is sending the events.</li>
<li><strong>Protocols</strong> ie http vs https.</li>
<li><strong>Global Actor ID</strong> if a customer is using Single Sign On, it might be important to also include a Global UID if it differs from the application specific ID.</li>
</ul>
<h2 id="key-functionality">Key functionality:</h2>
<h3 id="immutability">Immutability</h3>
<p>Data in an audit log should never change. Deleted objects should maintain a separately logged record of actions associated with the object (including its creation and deletion). External facing APIs should only be able to read the audit log, not write to it.</p>
<h3 id="time-synced">Time Synced</h3>
<p>Individual application audit logs will likely be combined with other audit log data, this makes it important to ensure that the timestamp on each event is accurate. The standard is to use the server time from a regularly <a href="https://labs.signalsciences.com/read-this-post-especially-if-you-dont-have-time">NTP synced server</a>, generally stored in GMT down to the millisecond.</p>
<h3 id="api--exportable">API &amp; exportable</h3>
<p>The activity should be exportable to a CSV format and API accessible so that it can be centralized into an organization wide SIEM logging system like Splunk. It&rsquo;s advisable to offer both the ability to poll for new events and to be able to push new events to the remote system. When polling, use standards such as <code>etag</code> headers to prevent duplicate events from being received. When pushing, use standards such as webhooks to minimize the amount of custom work required to ingest these events.</p>
<h3 id="account-admin-viewable">Account admin viewable</h3>
<p>An audit log viewer should be embedded into the application to make the audit log accessible to enterprise account admins at all times. This viewer should be the central place to access all account activity logs.</p>
<h3 id="searchable--filterable">Searchable &amp; filterable</h3>
<p>Events should be indexed for searchability and filtering. Generally, actors, event names, IPs are all linked to filter down to related activity. The viewer should allow the account admin to specify a date range to filter in conjunction with other filters and searches.</p>
<h3 id="change-log">Change log</h3>
<p>When new events and actions are captured in the audit log, it is important to publish the date at which each became available to appear in the audit log.</p>
<h3 id="customizable-retention-time">Customizable retention time</h3>
<p>By default an audit log should generally be kept for 1-3 years. The specific default timeframe should be documented but also made configurable (generally shorter) for customers who have data retention requirements.</p>
<h3 id="documented-lag-time">Documented lag time</h3>
<p>If there are significant lags between collection and reporting availability, those times should be made known to the account admin viewing the logs.</p>
<h2 id="examples">Examples:</h2>
<div class="example">
  <a href=/google/audit-log>
    <img src=/google/images/example.png align="left" style="margin: 0;" />
  </a>
  <div class="clearfix"></div>
  <h3>
    <a href=/google/audit-log>Google Audit Log</a>
  </h3>
</div>

<div class="example">
  <a href=/zendesk/audit-log>
    <img src=/zendesk/images/example.png align="left" style="margin: 0;" />
  </a>
  <div class="clearfix"></div>
  <h3>
    <a href=/zendesk/audit-log>Zendesk Audit Log</a>
  </h3>
</div>

<div class="clear"></div>
<h3>
  <a href="https://github.com/enterpriseready/enterpriseready/blob/master/content/features/audit-log.md" target="_blank">Content Contributors</a>
</h3>

<hr>
<p><div class="contributors">

  <a href="https://github.com/grantmiller" target="_blank"><img alt="" class="avatar" height="40" src="https://github.com/grantmiller.png?size=40" width="40"> </a>

</div>

<div class="contributors">

  <a href="https://github.com/marccampbell" target="_blank"><img alt="" class="avatar" height="40" src="https://github.com/marccampbell.png?size=40" width="40"> </a>

</div>

<div class="contributors">

  <a href="https://github.com/mojombo" target="_blank"><img alt="" class="avatar" height="40" src="https://github.com/mojombo.png?size=40" width="40"> </a>

</div>

<div class="contributors">

  <a href="https://github.com/dave-cole" target="_blank"><img alt="" class="avatar" height="40" src="https://github.com/dave-cole.png?size=40" width="40"> </a>

</div>
</p>

    </div>

<hr />
<div class="subscribe-wrapper">
    <div class="container" id="subscribe">
        <h3 align="center" class="section-header">Subscribe for the latest EnterpriseReady tips.</h3>
        <div class="row">
            <div class="three columns">
                &nbsp;
            </div>
            <div class="seven columns">
                
                <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
                <script>
                hbspt.forms.create({
                    portalId: "8554162",
                    formId: "cf19513d-014d-4435-b0ad-ac186f0ce56f"
                });
                </script>
            </div>
        </div>
    </div>
</div>

<div class="footer-wrapper">
    <div class="container" id="footer">
        <p align="center">
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
          <img alt="Creative Commons License" class="cc-image" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
        </a>
            Contributed by <a class="replicated-logo" href="https://www.replicated.com" target="_blank"></a></p>

        <br/>
        <p align="center">Replicated is modernizing on-prem software for the the cloud-native era. <a class="hiring" href="https://www.replicated.com/careers">We're hiring!</a></p>

    </div>
</div>

<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-61420213-5', 'auto');
    ga('send', 'pageview');
</script>


<script>
    ! function(e, t, n, s, u, a) {
        e.twq || (s = e.twq = function() {
                s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);
            }, s.version = '1.1', s.queue = [], u = t.createElement(n), u.async = !0, u.src = '//static.ads-twitter.com/uwt.js',
            a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))
    }(window, document, 'script');
    
    twq('init', 'nxrcn');
    twq('track', 'PageView');
</script>



<script type="text/javascript">
    _linkedin_partner_id = "434996";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);
</script>
<script type="text/javascript">
    (function() {
        var s = document.getElementsByTagName("script")[0];
        var b = document.createElement("script");
        b.type = "text/javascript";
        b.async = true;
        b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
        s.parentNode.insertBefore(b, s);
    })();
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=434996&fmt=gif" />
</noscript>




<script type="text/javascript">
    var _paq = _paq || [];
     
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
    var u="//data-2.replicated.com/";
    _paq.push(['setTrackerUrl', u+'data/']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'js/'; s.parentNode.insertBefore(g,s);
    })();
</script>




<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/8554162.js"></script>

</body>

</html>

